{% extends 'base.html' %}
{% block content %}

<script>
        /* stores the ordered state of columns */
        var asc1=1;
        var asc2=1;
        var asc3=1;
        var asc4=1;
        
        // sorts a column of a tbody
        function sort_table(tbody, col, asc) {
            var rows = tbody.rows,
                rlen = rows.length,
                arr = new Array(),
                i, j, cells, clen;
            // fill the array with values from the table
            for (i = 0; i < rlen; i++) {
                // console.log(rows[i])
                cells = rows[i].cells;
                clen = cells.length;
                arr[i] = new Array();
                for (j = 0; j < clen; j++)
                    arr[i][j] = cells[j].innerHTML;
            }
            // sort the array by the specified column number (col) and order (asc)
            arr.sort(function (a, b) {
                return (a[col] == b[col]) ? 0 : ((a[col] > b[col]) ? asc : -1 * asc);
            });
            // update text within every td without altering the tags
            for (i = 0; i < rlen; i++)
                for (j = 0; j < clen; j++)
                    rows[i].cells[j].textContent = arr[i][j];
        }
</script>

<div class="jumbotron text-center">
	<h1>Survey Results</h1>
</div>

<div class= "text-center">
<div class="container">
  <div class="row">
    <div class="col-sm-6">
<a href="{{url_for('surveyCreation')}}">new survey</a>
     </div>
	 <div class="col-sm-6">
<a href="{{url_for('surveys')}}">SurveyManagement</a>
		</div>
	</div>
</div>
</div>
<br>
<table>
<thead>
<th onclick='asc1 *= -1; sort_table(result_table, 0, asc1); asc2=1; asc3=1; asc4=1;'>task</th>
<th onclick='asc2 *= -1; sort_table(result_table, 1, asc2); asc1=1; asc3=1; asc4=1;'>survey</th>
<th onclick='asc3 *= -1; sort_table(result_table, 2, asc3); asc2=1; asc1=1; asc4=1;'>name</th>
<th onclick='asc4 *= -1; sort_table(result_table, 3, asc4); asc3=1; asc2=1; asc1=1;'>date completed</th>
</thead>
<tbody id='result_table'>
        {% for r in result_struct %} 
          <tr id='result_{{r["formID"]}}'>
            <td>{{r['taskTitle']}}</td>
            <td>{{r['surveyTitle']}}</td>
            <td>{{r['userName']}}</td>
            <td>{{r['date']}}</td>
          </tr> 
        {% endfor %}
</tbody>
</table>

{% endblock content %}
