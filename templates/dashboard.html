{% extends 'base.html' %}
{% block content %}
<script>
        /* stores the ordered state of columns */
        var asc1=1;
        var asc2=1;
        var asc3=1;
        var asc4=1;
        var asc5=1;
        var asc6=1;
        var asc7=1;
        var asc8=1;
        
        // sorts a column of a tbody
        function sort_table(tbody, col, asc) {
            var rows = tbody.rows,
                rlen = rows.length;
            
            var swapped;
            do {
                swapped = false;
                for (var i=0; i < rlen-1; i++) {
                    if (asc==1){
                            if (rows[i].cells[col].textContent > rows[i+1].cells[col].textContent) { //ascending order
                                tbody.insertBefore(rows[i+1], rows[i]);
                                swapped = true;
                            }
                    }if (asc==-1){
                            if (rows[i].cells[col].textContent < rows[i+1].cells[col].textContent) { //descending order
                                tbody.insertBefore(rows[i+1], rows[i]);
                                swapped = true;
                            }
                    }
                }
            } while (swapped);
        }
        
</script>

<div class="jumbotron text-center">
  <h1>Supervisor Dashboard</h1>
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
  <!-- Categories: success (green), info (blue), warning (yellow), danger (red) -->
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }} alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <!-- <strong>Title</strong> --> {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}


<div class="container" style="font-size: 1.5em;">
  <div class="page_content">

<!--Two tables for users and tasks-->
<div class="row">
  <div class="table-responsive col-md-12">
      <h2 class="sub-header text-center">Assigned Users</h2>
      <table class="table table-hover table-bordered">
        <thead id='user_table_header'>
          <tr>
            <th onclick='sort_table(user_table, 0, asc1); asc1 *= -1; asc2 =1;asc3 =1; document.getElementById("user_date").style.visibility="visible"; document.getElementById("user_name").style.visibility="hidden"; document.getElementById("user_email").style.visibility="hidden";  document.getElementById("user_date").src=(asc1==1)?"../static/img/up.png":"../static/img/down.png"' >Assigned<img id="user_date" style="height:1em;"></th>
            <th onclick='sort_table(user_table, 1, asc2); asc2 *= -1; asc1 =1;asc3 =1; document.getElementById("user_name").style.visibility="visible"; document.getElementById("user_email").style.visibility="hidden";  document.getElementById("user_date").style.visibility="hidden"; document.getElementById("user_name").src=(asc2==1)?"../static/img/up.png":"../static/img/down.png"' >Name<img id="user_name" style="height:1em;"></th>
            <th onclick='sort_table(user_table, 2, asc3); asc3 *= -1; asc1 =1;asc2 =1; document.getElementById("user_email").style.visibility="visible"; document.getElementById("user_name").style.visibility="hidden"; document.getElementById("user_date").style.visibility="hidden"; document.getElementById("user_email").src=(asc3==1)?"../static/img/up.png":"../static/img/down.png"' >Email<img id="user_email" style="height:1em;"></th>
          </tr>
        </thead>
        <tbody id='user_table'>
        {% for u in user_list %} 
          <tr id='user_{{u.userID}}' >
            <td>{{u.dateCreated}}</td>
            <td>{{u.fname}} {{u.lname}}</td>
            <td>{{u.email}}</td>
          </tr> 
        {% endfor %}
        </tbody>
    </table>
  </div>
  <div class="table-responsive col-md-12">
      <h2 class="sub-header text-center">Assigned Tasks</h2>
      <table class="table table-hover table-bordered">
        <thead>
          <tr>
            <th onclick='sort_table(task_table, 0, asc4); asc4 *= -1; asc5 =1;asc6 =1;asc7 =1; document.getElementById("task_date").style.visibility="visible"; document.getElementById("task_title").style.visibility="hidden"; document.getElementById("task_description").style.visibility="hidden"; document.getElementById("task_date").src=(asc4==1)?"../static/img/up.png":"../static/img/down.png";document.getElementById("task_progress").style.visibility="hidden";' >Assigned<img id="task_date" style="height:1em;"></th>
            <th onclick='sort_table(task_table, 1, asc5); asc5 *= -1; asc4 =1;asc6 =1;asc7 =1; document.getElementById("task_title").style.visibility="visible";  document.getElementById("task_date").style.visibility="hidden"; document.getElementById("task_description").style.visibility="hidden"; document.getElementById("task_title").src=(asc5==1)?"../static/img/up.png":"../static/img/down.png";document.getElementById("task_progress").style.visibility="hidden";' >Title<img id="task_title" style="height:1em;"></th>
            <th onclick='sort_table(task_table, 2, asc6); asc6 *= -1; asc4 =1;asc5 =1;asc7 =1; document.getElementById("task_description").style.visibility="visible"; document.getElementById("task_date").style.visibility="hidden"; document.getElementById("task_title").style.visibility="hidden"; document.getElementById("task_description").src=(asc6==1)?"../static/img/up.png":"../static/img/down.png";document.getElementById("task_progress").style.visibility="hidden";'>Description<img id="task_description" style="height:1em;"></th>
            <th onclick='sort_table(task_table, 3, asc7); asc7 *= -1; asc4 =1;asc5 =1;asc6 =1; document.getElementById("task_progress").style.visibility="visible"; document.getElementById("task_date").style.visibility="hidden"; document.getElementById("task_title").style.visibility="hidden"; document.getElementById("task_progress").src=(asc7==1)?"../static/img/up.png":"../static/img/down.png";document.getElementById("task_description").style.visibility="hidden";'>Progress<img id="task_progress" style="height:1em;"></th>
          </tr>
        </thead>
        <tbody id='task_table'>
           {% for t in task_list %} 
                  <tr id='task_{{t.taskID}}'>
                    <td>{{t.dateCreated}}</td>
                    <td>{{t.title}}</td>
                    <td>{{t.description}}</td>
                    <td>0%</td>
                  </tr>
            {% endfor %}
        </tbody>
    </table>
  </div>
</div>

</br>


 <!-- content goes here, above. -->

  </div>
</div><!-- /.container -->

{% endblock content %}
